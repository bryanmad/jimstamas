<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
	<meta content="width=device-width, initial-scale=1.0" name="viewport">
	<meta content="ie=edge" http-equiv="X-UA-Compatible">
	<title>fastinput</title>
	<link href='https://fonts.googleapis.com/css?family=Kalam' rel='stylesheet'>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<style>

* {
	font-family: arial;
	font-size: 5vh;
}

body {
	font-size: 5vh;
	width: 100vw;
	height: 100vh;
	background: white;
}

#dropdown {
	display: none;
	position: fixed;
	top: 1vh;
	right: 1vw;
	height: 20vh;
	background: cyan;
	overflow: auto;
}

.highlightgray {
background: silver;	
}

.position {
    position: absolute;
    width: 1px;
    height: 1px;
    z-index: 2;
    display: none;
}

.container {
    width: 220px;
    height: auto;
    border: 1px solid black;
    background: rgb(245, 243, 243);
}

.container p {
    height: 30px;
    font-size: 18px;
    font-family: arial;
    width: 99%;
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-itemelement.s: center;
    background: rgb(245, 243, 243);
    color: black;
    transition: 0.2s;
}

.container p:hover {
    background: lightblue;
}

td {
    font-family: arial;
    font-size: 20px;
	//padding: 1vh;
}

td:hover {
    background: lightblue;
    transition: 0.2s;
    cursor: pointer;
}


.teegroup {
	//background: gray;
	border: 2px solid black;
	border-radius: 5px;
	width: 50%;
	margin: 1vh;
}

.tee {
	padding: 1vh;
}

.head {
	background: gray;
	border: 2px solid black;
	border-radius: 5px;
	width: calc(50% - 2vh);
	margin: 1vh;
	color: white;
	padding:1vh;
}

div#msgbox {
    position:absolute;
	text-align: center;
    display:none;
    top:10%;
    left:10%;
    width:60%; 
    //margin-left:-250px;
    border: 2px solid black;
	border-radius: 5px; 
    padding:1vh;
    background-color:white;
}

#answeryes {
	text-align: center;
	border: 2px solid black;
	border-radius: 5px;
	padding: 3vh;
	margin: 3vh;
	float: left;
	width: 20%;
}

#answerno {
	text-align: center;
	border: 2px solid black;
	border-radius: 5px;
	padding: 3vh;
	margin: 3vh;
float: right;
	width: 20%;
}




</style>
</head>
<body>

 <div id="dropdown">
 <FORM name="moose">
 <SELECT size="8" name="S1" id="S1" oninput="update(S1, S2)" multiple>
 <OPTION>Yellow-l
 <OPTION>Red-l
 <OPTION>Green-l
 <OPTION>Blue-l
 <OPTION>Purple-l
 <OPTION>----------
 <OPTION>----------
 <OPTION>----------
 </SELECT>
 
 <SELECT size="8" name="S2" id="S2" style="margin-left:-10px; color:gray;" multiple>
 <OPTION>free
 <OPTION>free
 <OPTION>free
 <OPTION>free
 <OPTION>free
 <OPTION>free
 <OPTION>free
 <OPTION>free
 </SELECT>
 </FORM>
</div>







<div id="msgbox"><p>Previous data exists, restore ?</p>
    <p>
        <a id="answeryes" onclick=restoreTeeData()>
            Yes
        </a>
        <a id="answerno" onclick=saveTeeData()>
            No
        </a>
    </p>
</div>

<div id="teecontainer"></div>
<!--
<div id="a0" oncontextmenu="selected(this.id)">aaaaaaaaaa</div>
<div id="a1" oncontextmenu="selected(this.id)">bbbbbbbbbb</div>
<div id="a2" oncontextmenu="selected(this.id)">cccccccccc</div>
<div id="a3" oncontextmenu="selected(this.id)">dddddddddd</div>
<div id="a4" oncontextmenu="selected(this.id)">eeeeeeeeee</div>
<div id="a5" oncontextmenu="selected(this.id)">ffffffffff</div>
-->



<div class="position">
    <div class="container" align="center" style="overflow-y: scroll; height:400px;">
        <table style="text-align: left; width: 99%; margin-left: auto; margin-right: auto;" border="0" cellpadding="2" cellspacing="2">
            <tbody id="tbody">
<!-- code creates HTML here -->
            </tbody>
        </table>
    </div>
</div>

<script type="text/javascript">


// set up variables etc.

var selectedteeslotplayer = "";
var selectedteeslot = "";
var oldteeslotvalue = "";
var selectedteeslot = "a1";
var dropdownselectedplayer = "----------";
var currentteeslotid = "";
var currentdropdownname = "";
playersarray = [
"Bryan",
"Dale",
"Dean",
"Graham",

"John",
"Peter",
"Richard",
"Robert",

"SteveA",
"SteveW",
"Bryan",
"Dale",

"Dean",
"Graham",
"John",
"Peter",

"Richard",
"Robert",

]


// add empty values to array to make multiples of 4
if (playersarray.length%4 !== 0) {
	playersarray.push("----------")
	console.log("1 added")
}
if (playersarray.length%4 !== 0) {
	playersarray.push("----------")
	console.log("1 added")
}
if (playersarray.length%4 !== 0) {
	playersarray.push("----------")
	console.log("1 added")
}


 




// build a set of 4-ball tee times
var t = 0;
var teecontainer = document.getElementById("teecontainer")
for (let j = 0; j < playersarray.length; j+=4) {
   // create a 4-ball group
   console.log("j = " + j)
   t++
   let outerbox = document.createElement("div");
   outerbox.id= "aa" + t;
   outerbox.className = "teegroup";
   
   //console.log(teecontainer.innerHTML)
 
 
 
 
let heading = document.createElement("div");
heading.id= "h" + j;
heading.className = "head";
heading.innerText = "tee " + t;
teecontainer.appendChild(heading)


//console.log(teecontainer.innerHTML)

  
// then add 4 players
let box1 = document.createElement("div");
   box1.id= "a" + j;
   box1.className = "tee";
   //box.style.setProperty("--i", i);  
   box1.setAttribute( "onclick", "javascript: selected(this.id);" );
   box1.innerText = "----------"
   outerbox.appendChild(box1);

let box2 = document.createElement("div");
   box2.id= "a" + (j+1);
   box2.className = "tee";
   //box.style.setProperty("--i", i);  
   box2.setAttribute( "onclick", "javascript: selected(this.id);" );
   box2.innerText = "----------"
   outerbox.appendChild(box2);

let box3 = document.createElement("div");
   box3.id= "a" + (j+2);
   box3.className = "tee";
   //box.style.setProperty("--i", i);  
   box3.setAttribute( "onclick", "javascript: selected(this.id);" );
   box3.innerText = "----------"
   outerbox.appendChild(box3);

let box4 = document.createElement("div");
   box4.id= "a" + (j+3);
   box4.className = "tee";
   //box.style.setProperty("--i", i);  
   box4.setAttribute( "onclick", "javascript: selected(this.id);" );
   box4.innerText = "----------"
   outerbox.appendChild(box4);

teecontainer.appendChild(outerbox);




}

resetDropdownColors()




function resetDropdownColors() {
// reset dropdown list colors etc.
var temp = document.querySelectorAll(".tee");
    for (var i = 0; i < temp.length; i++) {
        temp[i].classList.remove("highlightgray");
    }

var k = document.getElementById("S1").options.length;

for (var i = 0; i < k; i++) {
        document.getElementById("S1").options[i].style.background = "white";
		document.getElementById("S2").options[i].style.background = "white";
		if (document.getElementById("S2").options[i].text == "in use") {
			document.getElementById("S2").options[i].style.color = "silver";
		} else {
			document.getElementById("S2").options[i].style.color = "black";
		}
		//document.getElementById("S2").options[i].style.color = "silver";
    }
document.getElementById("S1").options[k-1].selected = true;
}












// run by clicking on tee slot
function selected(id) {
	
	resetDropdownColors()
	
	
	
	
// clicked on tee slot
// show dropdown
document.getElementById("dropdown").style.display = "block";
var temp = document.querySelectorAll(".tee");
for (var i = 0; i < temp.length; i++) {
     temp[i].classList.remove("highlightgray");
}
document.getElementById(id).classList.add("highlightgray");
currentteeslotid = id;	
// get name in current tee slot
currentteeslotname = document.getElementById(id).innerText;
currentteeslotid = id;
}


 // dropdown
 function update(a,b){
	 j=a.options.length
    for (var i=0; i<j; i++){
        b.options[i].selected=a.options[i].selected;
		if (a.options[i].selected) {
           currentdropdownname = a.options[i].value;
		   document.getElementById(currentteeslotid).innerText = currentdropdownname;
           if (a.options[i].text !== "----------") {
		       b.options[i].text = "in use";
           }
		   // hide dropdown
           document.getElementById("dropdown").style.display = "none";
		}
    }
 }
 
 
 
function saveDropdownData() {
	var tempnamesarray = [];
	var tempusedarray = [];
	var ops = document.querySelectorAll(".container td");
	for (let i = 0; i < ops.length; i++) {
		// array of names
		tempnamesarray.push(document.getElementById("name" + i).innerText);
		// array of states for now
		tempusedarray.push(document.getElementById("used" + i).innerText);
		
		//console.log(tempnamesarray)
		//console.log(tempusedarray)
		
		localStorage.setItem("names", JSON.stringify(tempnamesarray));
		localStorage.setItem("used", JSON.stringify(tempusedarray));
		
	}	
	
	
	
	
}

function restoreDropdownData() {
	var tempnamesarray = [];
	var tempusedarray = [];
	tempnamesarray =  JSON.parse(localStorage.getItem("names"));
	tempusedarray =  JSON.parse(localStorage.getItem("used"));
	//console.log(tempnamesarray);
	for (let i = 0; i < tempnamesarray.length; i++) {
		document.getElementById("name" + i).innerText = tempnamesarray[i];
	    document.getElementById("used" + i).innerText = tempusedarray[i];
		// tidy up any cyan color left over
		//document.getElementById("name" + i).style.background = "white";
		
		
	}
	//document.getElementById("msgbox").style.display = "none";
	/*
	var ops = document.querySelectorAll(".container td");
	for (let i = 0; i < ops.length; i++) {
		// array of names
		tempnamesarray.push(document.getElementById("name" + i).innerText);
		// array of hcps - states for now
		tempusedarray.push(document.getElementById("used" + i).innerText);
		
		console.log(tempnamesarray)
		console.log(tempusedarray)
		
		localStorage.setItem("names", JSON.stringify(tempnamesarray));
		localStorage.setItem("used", JSON.stringify(tempusedarray));
*/
}



function saveTeeData() {
	var tempteenamesarray = [];
	//var tempusedarray = [];
	var ops = document.querySelectorAll(".container td");
	for (let i = 0; i < ops.length; i++) {
		// array of names
		tempteenamesarray.push(document.getElementById("a" + i).innerText);
		// array of hcps - states for now
		//tempusedarray.push(document.getElementById("used" + i).innerText);
		
		
		
		localStorage.setItem("teenames", JSON.stringify(tempteenamesarray));
		//localStorage.setItem("used", JSON.stringify(tempusedarray));
		
	}	
	console.log("saveTeeData = " + tempteenamesarray)
		//console.log(tempusedarray)
		document.getElementById("msgbox").style.display = "none";
		saveDropdownData();
}





function restoreTeeData() {
	var tempteenamesarray = [];
	//var tempusedarray = [];
	tempteenamesarray =  JSON.parse(localStorage.getItem("teenames"));
	console.log("restoreTeeData = " + tempteenamesarray);
	for (let i = 0; i < tempteenamesarray.length; i++) {
		document.getElementById("a" + i).innerText = tempteenamesarray[i];
	    //document.getElementById("used" + i).innerText = tempteeusednamesarray[i];
	}
	document.getElementById("msgbox").style.display = "none";
	restoreDropdownData();
}	


 </script>
</body>
</html>
